<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.repository.EmployeeMapper">
    <!-- マッピング（SELECT文用resultMap） -->
    <resultMap id="employee" type="com.example.demo.entity.Employee">
        <id column="code" property="code" />
        <result column="first_name" property="firstName" />
        <result column="last_name" property="lastName" />
        <result column="password" property="password" />
        <result column="role" property="role" />
        <result column="created_at" property="createdAt" />
        <result column="updated_at" property="updatedAt" />
    </resultMap>
    <!-- 全件取得 -->
    <select id="selectAll" resultMap="employee">
        SELECT code, first_name, last_name FROM employee ORDER BY created_at;
    </select>
    <!-- １件取得 -->
    <select id="selectByCode" resultMap="employee">
        SELECT * FROM employee WHERE code = #{code};
    </select>
    <!-- 登録実行 -->
    <insert id="insert" parameterType="com.example.demo.entity.Employee">
        INSERT INTO employee (code, first_name, last_name, password, role,
        created_at, updated_at)
        VALUES (#{code}, #{firstName}, #{lastName}, #{password}, #{role},
        CURRENT_TIMESTAMP, CURRENT_TIMESTAMP);
    </insert>
    <!-- 更新実行 -->
    <update id="update" parameterType="com.example.demo.entity.Employee">
        UPDATE employee SET first_name = #{firstName}, last_name = #{lastName},
        password = #{password}, role = #{role}, updated_at = CURRENT_TIMESTAMP
        WHERE code = #{code};
    </update>
    <!-- 削除実行 -->
    <delete id="delete" parameterType="String">
        DELETE FROM employee WHERE code = #{code};
    </delete>
</mapper>